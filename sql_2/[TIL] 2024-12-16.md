# [TIL] 2024-12-16
이론강의 실습 사이트(w3school)
https://www.w3schools.com/mysql/trymysql.asp?filename=trysql_select_limit
## JOIN

### RDB - 관계형 DB
- [유저의 아이디, 연락처, 주소, 구매 상품 가격, 개수, 결제수단]

|아이디|연락처|주소|구매 상품|가격|개수|결제수단|
|-|-|-|-|-|-|-|
|A|010-****-4679|광진구 자양동|NULL|NULL|NULL|NULL|
|B|010-****-7700|송파구 석촌동|샴푸|5000|1|국민카드|
|B|010-****-7700|송파구 석촌동|식빵|7000|1|국민카드|
|B|010-****-7700|송파구 석촌동|티백|3000|5|계좌이체|
|B|010-****-7700|송파구 석촌동|프라이팬|30000|1|신한카드|

- A는 주문을 한 적이 없기 떄문에 |NULL|NULL|NULL|NULL| 만큼의 공간 낭비
- B는 여러번 구매를 해도 B의 아이디가 달라지는 않기 때문에 불필요한 공간을 사용하는 낭비가 발생한다.
---
그래서 유저 정보와 상품 테이블을 분리하는 방법을 사용
### Users
|Id|로그인 아이디|연락처|주소
|-|-|-|-|
|1|A|010-****-4679|광진구 자양동|
|2|B|010-****-7700|송파구 석촌동|

### Orders
|userId|구매 상품|가격|개수|결제수단|
|-|-|-|-|-|
|2|샴푸|5000|1|국민카드|
|2|식빵|7000|1|국민카드|
|2|티백|3000|5|계좌이체|
|2|프라이팬|30000|1|신한카드|

### 두 테이블의 결합
- 두 테이블을 연결할 수 있는 Users의 Id와 Orders에 있는 userId 이 두 컬럼을 가지고 연결한다.

### INNER JOIN
#### Users
|Id|로그인 아이디|주소|
|-|-|-|
|1|A|광진구 자양동|
|2|B|송파구 석촌동|
|3|C|분당구 판교동|

#### Orders
|userId|구매 상품|가격|결제수단|
|-|-|-|-|
|1|샴푸|5000|국민카드|
|2|식빵|7000|신한카드|
|3|티백|3000|계좌이체|

#### SELECT * FROM Users, Orders의 결과
|Id|로그인 아이디|주소|userId|구매 상품|가격|결제수단|
|-|-|-|-|-|-|-|
|1|A|광진구 자양동|1|샴푸|5000|국민카드|
|2|B|송파구 석촌동|1|샴푸|5000|국민카드|
|3|C|분당구 판교동|1|샴푸|5000|국민카드|
|1|A|광진구 자양동|2|식빵|7000|신한카드|
|2|B|송파구 석촌동|2|식빵|7000|신한카드|
|3|C|분당구 판교동|2|식빵|7000|신한카드|
|1|A|광진구 자양동|3|티백|3000|계좌이체|
|2|B|송파구 석촌동|3|티백|3000|계좌이체|
|3|C|분당구 판교동|3|티백|3000|계좌이체|
- 카티산 제곱이 발생한다.
    - Users와 Orders로 만들 수 있는 모든 경우를 만들어준다. 


#### 기대값
|Id|로그인 아이디|주소|userId|구매 상품|가격|결제수단|
|-|-|-|-|-|-|-|
|1|A|광진구 자양동|1|샴푸|5000|국민카드|
|2|B|송파구 석촌동|2|식빵|7000|신한카드|
|3|C|분당구 판교동|3|티백|3000|계좌이체|
<br>

- WHERE절로 출력하기
```SQL
SELECT * 
FROM Users, Orders
WHERE Users.Id = Orders.userId
```

- JOIN 사용
```SQL
SELECT * 
FROM Users
INNER JOIN Orders ON Users.Id = Orders.userId
```
Users에 Orders 테이블을 붙일 때 기준이 되는 컬럼이 어떤거냐?
-> Users.Id와 Orders.userId이 같을 때

INNER JOIN은 양 테이블에 값이 모두 있을때만 출력해준다. (교집합)
 
```SQL
SELECT * 
FROM Orders
	INNER JOIN Customers ON Orders.CustomerID = Customers.CustomerID
    INNER JOIN Shippers ON Orders.ShipperID = Shippers.ShipperID
```
- 즉, Order의 정보에 해당하는 유저 정보를 한 테이블로 합쳐서 볼 수 있다.
- JOIN 두 번도 가능하다

```SQL
SELECT 검색할 컬럼
FROM 합칠 테이블
    INNER JOIN 합칠 테이블 ON 조건(ex a.id = b.id)
```

## OUTER JOIN(LEFT, RIGHt)

#### Users
|Id|로그인 아이디|주소|
|-|-|-|
|1|A|광진구 자양동|
|2|B|송파구 석촌동|
|3|C|분당구 판교동|

#### Orders
|userId|구매 상품|가격|결제수단|
|-|-|-|-|
|1|샴푸|5000|국민카드|
|2|식빵|7000|신한카드|

#### 기대값
|Id|로그인 아이디|주소|userId|구매 상품|가격|결제수단|
|-|-|-|-|-|-|-|
|1|A|광진구 자양동|1|샴푸|5000|국민카드|
|2|B|송파구 석촌동|2|식빵|7000|신한카드|
|3|C|분당구 판교동|NULL|NULL|NULL|NULL|
<br>

```SQL
SELECT * 
FROM Users
	LEFT JOIN Orders ON Users.Id = Orders.userId
```

