# WAS와 웹 서버의 차이
웹 서버는 정적 컨텐츠(HTML, CSS, JS, 이미지 등)를 제공하는 역할을 수행한다.
동적 컨텐츠 요청시 요청을 WAS(Web Application Server)로 전달하여 처리할 수도 있다.
대표적인 웹 서버로는 **Nginx, Apache HTTP Server** 등이 있다.

반면, JAVA 진영에서 WAS(Web Application Server)는 서블릿 컨테이너 기능을 제공하고, 동적 컨텐츠를 생성하거나, 애플리케이션 로직을 실행하는 데 특화되어 있다. 대표적인 WAS로는 **Tomcat, Jetty** 등이 있다.
> 정리하자면, 웹 서버는 정적 파일을 제공하고, WAS는 동적 요청을 처리하는 역할을 한다. 웹 서버와 WAS를 병행하여 사용하면 성능과 보안을 모두 강화할 수 있다.

## WAS도 정적 컨텐츠를 제공할 수 있는데 웹 서버가 따로 필요한 이유는?
WAS가 너무 많은 역할을 담당하면 과부화될 수 있다. 
웹 서버를 따로 분리하면 WAS는 중요한 애플리케이션 로직에 집중할 수 있고, 웹 서버는 정적 리소스를 처리하면서 업무 분담이 이루어진다. 또한, 시스템 리소스를 효율적으로 관리할 수 있다. 정적 컨텐츠가 많이 사용되는 경우에는 웹 서버를 증설하고, 애플리케이션 자원이 많이 사용되면 WAS를 증설하는 식으로 유연하게 대응할 수 있다.
이외에도 로드 밸런싱을 하거나, 캐싱 및 압축, HTTPS 등을 웹 서버에서 처리하도록 할 수 있다.
> WAS에서 정적 파일을 제공할 수 있으나, Nginx 같은 웹 서버가 훨씬 더 효율적이고 빠르다. 비동기, 이벤트 처리, 메모리 캐싱, gzip 압축 등 다양한 최적화 기능을 제공하기 때문이다.

## 웹 서버와 WAS의 동작 흐름
> [사용자] → [웹 서버] → [WAS] → [DB 등 처리] → [응답 생성] → [웹 서버] → [사용자]
- 웹 서버의 역할 : 클라이언트의 요청이 들어오면 정적 컨텐츠(HTML, CSS, JS 등)를 직접 반환하거나, 동적 요청을 WAS로 전달한다(리버스 프록시 역할).
- WAS의 역할 : 웹 서버로부터 동적 요청을 받아 비즈니스 로직을 처리하고, 필요한 데이터를 조회하여 응답을 생성한다.
    - 서블릿/JSP 혹은 Spring 같은 프레임 워크로 비즈니스 로직 처리 후 HTML 응답 생성

## Servlet Container란?
- WAS의 핵심 구성 요소로, HttpServletRequest와 HttpServletResponse 객체를 통해 HTTP 요청과 응답을 처리한다.
- 서블릿 생명 주기 관리(init, service, destroy) 및 요청 라우팅을 담당한다.

## Nginx + Tomcat 조합
- Nginx는 정적 리소스(이미지, CSS, JS 등) 처리, 로드 밸런식, SSL(HTTPS) 종단 처리 등을 담당한다.
- Tomcat은 Java 웹 애플리케이션 구동, Spring MVC, 서블릿/JSP 처리 등을 담당한다.
> 이렇게 구성하면 정적 리소스는 Nginx가 빠르게 처리하고, 동적 로직은 WAS에 부담을 집중시켜 성능을 최적화할 수 있다. 또한, Nginx는 리버스 프록시 역할을 하여 Tomcat의 부하를 분산시키고, 보안을 강화할 수 있다.

## 면접 예상 질문
- 리버스 프록시가 뭔가요?
    - 리버스 프록시 서버는 클라이언트의 요청을 받아 실제 서버(WAS 등)로 전달하고, 그 응답을 다시 클라이언트에게 전달하는 역할을 한다. 이를 통해 로드 밸런싱, 보안 강화, 캐싱 등의 기능을 제공할 수 있다.
- WAS에서 DispatcherServlet은 어떤 역할을 하나요?
    - DispatcherServlet은 Spring MVC에서 클라이언트의 요청을 처리하는 중앙 컨트롤러 역할을 한다. 요청을 적절한 컨트롤러로 라우팅하고, 해당 컨트롤러에서 비즈니스 로직을 실행한 후, 결과를 뷰로 전달하여 최종 응답을 생성한다.
- Tomcat은 웹 서버인가? WAS인가?
    - Tomcat은 서블릿 컨테이너로, WAS의 역할을 수행한다. 즉, Java 웹 애플리케이션을 실행하고, 서블릿/JSP를 처리하는 기능을 제공한다. 따라서 Tomcat은 WAS로 분류된다.
    - 보통 프로젝트시 Apache Tomcat을 자주 볼 수 있는데 이것 때문에 웹 서버라고 오해할 수 있다. Apache Tomcat은 Apache와 Tomcat의 조합으로, Tomcat은 Java 웹 애플리케이션을 실행하는 WAS 역할을 한다. Apache는 웹 서버 역할을 한다. 따라서 Tomcat은 WAS로 분류된다.
