# CAP 정리
분산 데이터베이스 시스템이 CAP 중 2개의 속성만을 제공할 수 있다는 이론.
일관성(Consistency), 가용성(Availability), 분할 내성 or 파티션 허용성(Partition Tolerance) 중 2개만을 제공할 수 있다. 3가지 속성을 모두 만족하는 분산 데이터베이스 시스템은 존재하지 않는다.

## 각 속성의 정의
- 일관성(Consistency): 모든 클라이언트 요청은 어느 노드에 연결되어도 같은 데이터를 볼 수 있음을 의미한다.
- 가용성(Availability): 노드 일부에 문제가 발생하여도 시스템은 클라이언트의 모든 요청에 유효한 응답을 제공해야 함을 의미한다.
- 분할 내성(Partition Tolerance): 노드 사이에 통신이 불가능한 상황(파티션)에서도 시스템이 계속 작동해야 함을 의미한다.

## 각 속성의 조합과 예시
가정 : 3개의 분산 데이터베이스 시스템이 있다고 가정한다.
분산 데이터 베이스 시스템에서는 특정 서버에 쓰기 작업이 발생하면, 나머지 서버에 데이터가 전파된다.
이때, 만약 A 파티션(1대의 노드),B 파티션(2대의 노드)로 네트워크가 분할되어 있다면 이때 파티션 간 노드들은 서로 통신할 수 없기 때문에 데이터 전파가 불가능하다.

CA 시스템은 일관성과 가용성을 지원하며 분할 내성을 지원하지 않는다. 즉, 네트워크가 분할되면 시스템은 작동하지 않는다. 예를 들어, MySQL Cluster는 CA 시스템이다. 네트워크가 분할되면 클러스터는 작동하지 않으며, 일관성과 가용성을 보장한다. 하지만, 통상적으로 네트워크 장애는 피할 수 없는 일로 여겨지기 때문에 분산 시스템에서 분할 내성을 포기하기는 어렵다. 따라서 실제로는 CA 시스템은 존재하지 않는다.

CP혹은 AP 시스템이 현실적인 대안이 될 수 있다.
CP시스템은 일관성과 분할 내성을 지원하며, 가용성을 포기한다. 즉, 네트워크가 분할되면 시스템은 일관성을 유지하기 위해 일부 요청에 대해 응답하지 않을 수 있다. 예를 들어, HBase는 CP 시스템이다. HBase는 강력한 일관성을 제공하지만, 네트워크가 분할되면 일부 요청이 실패할 수 있다.

AP 시스템은 가용성과 분할 내성을 지원하며, 일관성을 포기한다. 즉, 네트워크가 분할되면 시스템은 계속 작동하지만, 일관성이 깨질 수 있다. 예를 들어, Cassandra는 AP 시스템이다. Cassandra는 높은 가용성을 제공하지만, 데이터의 일관성이 깨질 수 있다. 일관성이 희생되지만 파티션 문제가 해결되는 경우 동기화 작업을 수행하여 최종적으로는 일관성을 회복할 수 있다.