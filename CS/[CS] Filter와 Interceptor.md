# Filterì™€ Interceptorì˜ ì°¨ì´
## Filter
- ìš”ì²­ ë° ì‘ë‹µì˜ ì „ì²˜ë¦¬ì™€ í›„ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ê³  ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì— ì˜í•´ ì‹¤í–‰ë˜ëŠ” Java í´ë˜ìŠ¤.
ì£¼ë¡œ ìœ ì²­ ë¡œê¹…, ì¸ì¦, ì¸ì½”ë”© ì„¤ì •, CORS ì²˜ë¦¬, ìºì‹±, ì••ì¶• ë“±ì˜ ê³µí†µ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ë° ì‚¬ìš©
### íŠ¹ì§•
- FilterëŠ” ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ(ì˜ˆ:Tomcat) ìˆ˜ì¤€ì—ì„œ ë™ì‘í•œë‹¤.
ëª¨ë“  ìš”ì²­ì´ ì„œë¸”ë¦¿ìœ¼ë¡œ ì „ë‹¬ë˜ê¸° ì „ì— Filterë¥¼ ê±°ì¹œë‹¤.
- ìƒëª… ì£¼ê¸° : FilterëŠ” doFilter ë©”ì„œë“œë¥¼ í†µí•´ ìš”ì²­ ë° ì‘ë‹µì„ ì²˜ë¦¬í•œë‹¤.
FilterChainì„ í†µí•´ ë‹¤ìŒ í•„í„° ë˜ëŠ” ìµœì¢… ì„œë¸”ë¦¿ìœ¼ë¡œ ìš”ì²­ì„ ì „ë‹¬í•œë‹¤.
- ìˆœì„œ : web.xmlì´ë‚˜ @WebFilter ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ ì„¤ì •í•  ìˆ˜ ìˆìœ¼ë©°, í•„í„°ì˜ ìˆœì„œëŠ” ì„±ì • íŒŒì¼ì—ì„œ ì •ì˜í•œë‹¤.

## Interceptor
- íŠ¹ì • í•¸ë“¤ëŸ¬ ë©”ì„œë“œ ì‹¤í–‰ ì „í›„ì— ê³µí†µ ê¸°ëŠ¥ì„ êµ¬í˜„í•œë‹¤.
ì£¼ë¡œ ìš”ì²­ ë¡œê¹…, ì¸ì¦, ê¶Œí•œ ê²€ì‚¬, ì„¸ì…˜ ê²€ì‚¬, ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ë“±ì„ ìˆ˜í–‰í•˜ëŠ” ë° ì‚¬ìš©í•œë‹¤.
### íŠ¹ì§•
- InterceptorëŠ” Spring MVCì˜ í•¸ë“¤ëŸ¬ ìˆ˜ì¤€ì—ì„œ ë™ì‘í•œë‹¤. Dispatcher Servletì´ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•˜ê¸° ì „ì— Interceptorë¥¼ ê±°ì¹œë‹¤.
- ìƒëª… ì£¼ê¸°
    - preHandle : ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ê¸° ì „ì— ì‹¤í–‰ëœë‹¤.
    - postHadle : ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë©”ì„œë“œê°€ ì‹¤í–‰ëœ í›„, ë·°ê°€ ëœë”ë§ë˜ê¸° ì „ì— ì‹¤í–‰ëœë‹¤.
    - afterCompletion : ë·°ê°€ ëœë”ë§ëœ í›„ ì‹¤í–‰ëœë‹¤.
- ìˆœì„œ : WebMvcConfiguerë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ì—ì„œ addInterceptors ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¤ì •í•œë‹¤.
ì¸í„°ì…‰í„°ì˜ ìˆœì„œëŠ” ë“±ë¡ ìˆœìˆ˜ì— ë”°ë¥¸ë‹¤.


## Filter vs Interceptor ë¹„êµ

| í•­ëª© | Filter | Interceptor |
|------|--------|-------------|
| ì •ì˜ | ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ ìˆ˜ì¤€ì—ì„œ ë™ì‘í•˜ëŠ” Java í´ë˜ìŠ¤. ìš”ì²­ ë° ì‘ë‹µ ì „ì²˜ë¦¬/í›„ì²˜ë¦¬ ìˆ˜í–‰ | Spring MVC ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë™ì‘. í•¸ë“¤ëŸ¬ ì‹¤í–‰ ì „í›„ ê³µí†µ ê¸°ëŠ¥ ìˆ˜í–‰ |
| ì¸í„°í˜ì´ìŠ¤ | `jakarta.servlet.Filter` | `HandlerInterceptor` |
| ì‹¤í–‰ ì‹œì  | ì„œë¸”ë¦¿ ì´ì „ì— ì‹¤í–‰ë¨ | ì»¨íŠ¸ë¡¤ëŸ¬ ì‹¤í–‰ ì „í›„ì— ì‹¤í–‰ë¨ (ì„œë¸”ë¦¿ ì´í›„) |
| ë™ì‘ ë²”ìœ„ | ì„œë¸”ë¦¿ ìˆ˜ì¤€ (DispatcherServlet ì´ì „) | ì»¨íŠ¸ë¡¤ëŸ¬ ìˆ˜ì¤€ (DispatcherServlet ì´í›„) |
| ë©”ì„œë“œ | `doFilter()`ë¥¼ í†µí•´ ì²˜ë¦¬. ìš”ì²­ ì¤‘ë‹¨, ìˆ˜ì •, ì²´ì¸ ì „ë‹¬ ê°€ëŠ¥ | `preHandle()`, `postHandle()`, `afterCompletion()` |
| ì„¤ì • ë°©ë²• | `@WebFilter` ë˜ëŠ” `web.xml`ì—ì„œ ì„¤ì •. ìˆœì„œ ì§€ì • ê°€ëŠ¥ | `WebMvcConfigurer`ì˜ `addInterceptors()`ë¡œ ë“±ë¡. ìˆœì„œëŠ” ë“±ë¡ ìˆœ |
| ì£¼ìš” ì‚¬ìš©ì²˜ | ì¸ì½”ë”© ì„¤ì •, ì¸ì¦, ë¡œê¹…, CORS, ìºì‹±, ì••ì¶• ë“± | ì¸ì¦, ê¶Œí•œ ì²´í¬, ì„¸ì…˜ ê²€ì‚¬, ë¡œê¹…, ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ë“± |


## ìš”ì²­ ì²˜ë¦¬ íë¦„ì—ì„œì˜ Filterì™€ Interceptorì˜ ìœ„ì¹˜

```
í´ë¼ì´ì–¸íŠ¸ ìš”ì²­
    â†“
[Filter] â€” ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ(Tomcat ë“±)ì—ì„œ ì‹¤í–‰ë¨ (DispatcherServlet ì´ì „)
    â†“
[DispatcherServlet] â€” Spring MVCì˜ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬
    â†“
[Interceptor.preHandle()] â€” ì»¨íŠ¸ë¡¤ëŸ¬ ì‹¤í–‰ ì§ì „
    â†“
[Controller] â€” ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìˆ˜í–‰
    â†“
[Interceptor.postHandle()] â€” ì»¨íŠ¸ë¡¤ëŸ¬ ì‹¤í–‰ í›„, View ë Œë”ë§ ì „
    â†“
[ViewResolver â†’ View ë Œë”ë§]
    â†“
[Interceptor.afterCompletion()] â€” View ë Œë”ë§ í›„, ë¦¬ì†ŒìŠ¤ ì •ë¦¬
    â†“
[DispatcherServlet â†’ Filter â†’ ì‘ë‹µ ì „ì†¡]
    â†“
í´ë¼ì´ì–¸íŠ¸ ì‘ë‹µ
```

> ğŸ” ì •ë¦¬í•˜ìë©´:  
- FilterëŠ” DispatcherServlet ì´ì „, ì¦‰ Spring MVC ì§„ì… ì „ ë™ì‘  
- InterceptorëŠ” DispatcherServlet ì´í›„, ì»¨íŠ¸ë¡¤ëŸ¬ ì „í›„ ë° View ë Œë”ë§ ë‹¨ê³„ì—ì„œ ë™ì‘
